(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,a){},48:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(21),r=a.n(n),l=(a(47),a(48),a(7)),o=a(9),i=a(23),d=a(2),u=a(5),j=a.p+"static/media/loadingCat.774067e6.svg",b=a(0),m=function(){return Object(b.jsx)("div",{className:"fixed inset-y-0 z-20 w-full h-full flex justify-center items-center bg-black transiton-opacity bg-opacity-30",children:Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("img",{src:j,alt:"loadingCat",className:"m-auto"}),Object(b.jsx)("p",{className:"text-white",children:"Checking credentials..."})]})})},p=a(3),x=a(6),f=a.n(x),h=a(10),O=a(4),v=a.n(O);v.a.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token"))),e}));var g=function(e){return v.a.post("/login/signup",e)},w=function(e){return v.a.post("/login",e)},N={firstname:"",lastname:"",email:"",confirmPassword:"",password:""},y=function(){var e,t,a,s,n,r,l,j,x,O,v,y,E=Object(c.useState)(!1),L=Object(u.a)(E,2),S=L[0],C=L[1],R=Object(c.useState)(N),k=Object(u.a)(R,2),_=k[0],D=k[1],U=Object(c.useState)(""),T=Object(u.a)(U,2),P=T[0],I=T[1],A=Object(o.g)(),F=Object(p.b)(),M=Object(p.c)((function(e){return e.auth})),G=Object(c.useRef)();Object(c.useEffect)((function(){localStorage.getItem("token")&&A.push("/")}),[A]);var z=function(e){D(Object(d.a)(Object(d.a)({},_),{},Object(i.a)({},e.target.name,e.target.value)))},q=function(){D({firstname:"",lastname:"",email:"",confirmPassword:"",password:""}),I("")};return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"fixed m-4 z-40 text-sm text-gray-300 text-center bottom-0 right-0 underline",children:Object(b.jsx)("a",{href:"https://www.facebook.com/limnixon03292001/",children:"Developed By: Nixon A. Lim"})}),Object(b.jsxs)("div",{className:"relative z-10 w-full max-w-full min-h-screen flex justify-center items-center border-red-500",children:[Object(b.jsxs)("div",{className:"bg-white tracking-wide bg-opacity-13 px-8 py-9 rounded shadow md:w-96 h-auto space-y-10 m-2 ".concat(S&&"md:w-1/2 lg:w-2/5 "),children:[Object(b.jsxs)("h1",{className:"text-3xl text-gray-600 text-center w-full",children:[S?""===P?"Sign Up":Object(b.jsx)("img",{src:P,alt:P,className:"rounded-full block w-24 h-24 m-auto object-cover"}):Object(b.jsxs)("div",{className:"",children:[Object(b.jsx)("span",{className:"text-xs",children:"Welcome to"}),Object(b.jsx)("p",{className:"text-3xl",children:"Connect!"})]})," "]}),Object(b.jsxs)("form",{className:"space-y-5 ".concat(S&&"sm:space-y-2"),onSubmit:function(e){e.preventDefault();var t=e.target,a=new FormData(t);if(S){for(var c=0,s=Object.entries(_);c<s.length;c++){var n=Object(u.a)(s[c],2),r=n[0];if(""===n[1].trim())return alert("".concat(r," is required!"))}if(_.password.trim()!==_.confirmPassword.trim())return F({type:"ERROR",payload:{password:"Password and Confirm Password doesn't match!"}});F(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"LOADING"}),c.next=4,g(e);case 4:s({type:"LOADING_DONE"}),t((function(e){return!e})),a(),c.next=14;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0),r=null===(n=c.t0.response)||void 0===n?void 0:n.data.errors,s({type:"ERROR",payload:r});case 14:case"end":return c.stop()}}),c,null,[[0,9]])})));return function(e){return c.apply(this,arguments)}}()}(a,C,q))}else F(function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(c){var s,n,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:"LOADING"}),a.next=4,w(e);case 4:s=a.sent,c({type:"LOGIN",payload:s}),t.push("/"),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),r=null===(n=a.t0.response)||void 0===n?void 0:n.data.errors,c({type:"ERROR",payload:r});case 14:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(_,A))},ref:G,children:[S&&Object(b.jsxs)("div",{className:"flex space-x-3",children:[Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("label",{className:"block text-gray-600 text-xs md:text-sm",children:"Firstname"}),(null===(e=M.error)||void 0===e?void 0:e.firstname)&&Object(b.jsx)("span",{className:"text-red-400 text-xs",children:null===(t=M.error)||void 0===t?void 0:t.firstname}),Object(b.jsx)("input",{type:"text",name:"firstname",placeholder:"FirstName",className:"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500",onChange:z,value:_.firstname,required:!0})]}),Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("label",{className:"block text-gray-600 text-xs md:text-sm",children:"Lastname"}),(null===(a=M.error)||void 0===a?void 0:a.lastname)&&Object(b.jsx)("span",{className:"text-red-400 text-xs",children:null===(s=M.error)||void 0===s?void 0:s.lastname}),Object(b.jsx)("input",{type:"text",name:"lastname",placeholder:"LastName",className:"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500",onChange:z,value:_.lastname,required:!0})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"block text-gray-600 text-xs md:text-sm",children:"Email"}),(null===(n=M.error)||void 0===n?void 0:n.email)&&Object(b.jsx)("span",{className:"text-red-400 text-xs",children:null===(r=M.error)||void 0===r?void 0:r.email}),Object(b.jsx)("input",{type:"text",name:"email",placeholder:"Email",className:"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500",onChange:z,value:_.email,required:!0})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"block text-gray-600 text-xs md:text-sm",children:"Password"}),(null===(l=M.error)||void 0===l?void 0:l.password)&&Object(b.jsx)("span",{className:"text-red-400 text-xs",children:null===(j=M.error)||void 0===j?void 0:j.password}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500",onChange:z,value:_.password,required:!0})]}),S&&Object(b.jsxs)("div",{className:"space-y-3",children:[Object(b.jsx)("label",{className:"block text-gray-600 text-xs md:text-sm",children:"Confirm Password"}),(null===(x=M.error)||void 0===x?void 0:x.confirmPassword)&&Object(b.jsx)("span",{className:"text-red-400 text-xs",children:null===(O=M.error)||void 0===O?void 0:O.confirmPassword}),Object(b.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",className:"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500",onChange:z,value:_.confirmPassword,required:!0}),Object(b.jsxs)("div",{children:[(null===(v=M.error)||void 0===v?void 0:v.imageUrl)&&Object(b.jsx)("span",{className:"text-red-400 text-xs",children:null===(y=M.error)||void 0===y?void 0:y.imageUrl}),Object(b.jsxs)("div",{className:"flex items-center md:gap-2",children:[Object(b.jsx)("label",{className:"block text-gray-600 text-xs md:text-sm",children:"Upload Picture:"}),Object(b.jsx)("div",{className:"text-xs md:text-sm p-2 text-gray-600 cursor-pointer ",children:Object(b.jsx)("input",{type:"file",name:"image",onChange:function(e){if("image/jpg"!==e.target.files[0].type&&"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type)return G.current.reset(),I(""),alert("File type not supported!");I(URL.createObjectURL(e.target.files[0]))}})}),Object(b.jsx)("p",{})]})]})]}),S?Object(b.jsx)("div",{className:"space-y-3",children:Object(b.jsx)("button",{className:"bg-purple-700 hover:bg-purple-400 text-white text-lg px-4 py-2 rounded block w-full active:bg-purple-300 transition ease-in duration-75",children:Object(b.jsx)("span",{className:"flex justify-center items-center text-md md:text-lg",children:"Sign Up"})})}):Object(b.jsxs)("div",{className:"space-y-3",children:[Object(b.jsx)("button",{className:"bg-purple-700 hover:bg-purple-400 text-white px-4 py-2 rounded block w-full active:bg-purple-500 transition ease-in duration-75 text-md md:text-lg",children:"Login"}),"  "]})]}),Object(b.jsxs)("p",{className:"text-gray-500 text-xs text-center cursor-pointer mt-1",onClick:function(){C((function(e){return!e})),q(),F({type:"CLEAR_ERROR"})},children:[S?" Already have an account?":"Don't have an account? Click here to Sign up!","   "]})]}),M.loading&&Object(b.jsx)(m,{})]})]})},E=a.p+"static/media/global-network.8f3618a1.svg",L=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"fixed flex items-center gap-2 right-0 bottom-0 text-white w-auto m-3",children:[Object(b.jsx)("img",{src:E,alt:"",className:"h-9 w-9"}),Object(b.jsx)("h1",{className:"font-light text-lg",children:"CONNECT"})]}),Object(b.jsxs)("div",{className:"flex gap-2 items-center justify-center text-white h-screen w-full",children:[Object(b.jsx)("h1",{className:"text-center font-bold text-lg ",children:"Oops! Page not found..."}),Object(b.jsx)(l.b,{to:"/",className:"text-blue-400 underline cursor-pointer",children:"Go back."})]})]})},S=a(42),C=a.p+"static/media/home.c6394632.svg",R=a.p+"static/media/logout.6a4850f9.svg",k=a.p+"static/media/defaultImage.b89488d1.jpg",_=function(){var e,t,a,c=Object(p.c)((function(e){return e.auth})),s=Object(p.b)(),n=Object(o.g)();return Object(b.jsx)("div",{className:"fixed z-20 lg:hidden bottom-0 right-0 left-0 bg-primary rounded-t-md shadow-md p-1",children:Object(b.jsxs)("div",{className:"text-white flex justify-evenly items-center gap-3",children:[Object(b.jsx)(l.b,{to:"/",className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75",children:Object(b.jsx)("img",{src:C,alt:"Home",className:"h-5 w-5 m-auto"})}),Object(b.jsx)(l.b,{to:"/profile/".concat(null===(e=c.authData)||void 0===e?void 0:e._id),children:(null===(t=c.authData)||void 0===t?void 0:t.imageUrl)?Object(b.jsx)("img",{src:null===(a=c.authData)||void 0===a?void 0:a.imageUrl,alt:"",className:"bg-purple-400 h-12 w-12 rounded-full object-cover object-center border-2 border-borderProfile cursor-pointer"}):Object(b.jsx)("img",{src:k,alt:"",className:"bg-purple-400 h-12 w-12 rounded-full object-cover object-center border-2 border-borderProfile cursor-pointer"})}),Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75",onClick:function(){s({type:"LOGOUT"}),n.push("/login")},children:Object(b.jsx)("img",{src:R,alt:"Logout",className:"h-5 w-5 m-auto"})})]})})},D=a(39),U=["component"],T=function(e){var t=e.component,a=Object(S.a)(e,U),s=Object(p.b)(),n=Object(o.g)(),r=Object(p.c)((function(e){return e.users.page})),l=Object(p.c)((function(e){return e.users.pageFollowers}));Object(c.useEffect)((function(){var e,t=v.a.CancelToken;return s({type:"LOADING"}),v.a.get("/login/user",{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;s({type:"INSERT_USER",payload:t.result})})).catch((function(e){v.a.isCancel(e)&&console.log("Request Canceled, fetching autheticated user"),s({type:"ERROR",payload:e})})),function(){e(),s({type:"SETPAGE_DEFAULT"}),s({type:"SETPAGEFOLLOWERS_DEFAULT"}),s({type:"CLEAR_USERS"})}}),[s]),Object(c.useEffect)((function(){var e,t=v.a.CancelToken;return s({type:"USERS_LOADING"}),v.a.get("/users/all?page=".concat(r),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;s({type:"USERS",payload:t})})).catch((function(e){var t;v.a.isCancel(e)&&console.log("Request Canceled users"),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(s({type:"LOGOUT"}),n.push("/login"))})),function(){return e()}}),[s,n,r]),Object(c.useEffect)((function(){var e,t=v.a.CancelToken;return s({type:"USER_FOLLOWERS_LOADING"}),v.a.get("/users/followers?page=".concat(l),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;s({type:"USERS_FOLLOWERS",payload:t})})).catch((function(e){v.a.isCancel(e)&&console.log("Reques Canceled, fetching user's follower"),s({type:"USERS_ERROR",payload:e.message})})),function(){return e()}}),[s,l]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return function(){var e=localStorage.token;if(e)return!(1e3*Object(D.a)(e).exp<(new Date).getTime())||(localStorage.removeItem("token"),!1)}()?Object(b.jsx)(t,Object(d.a)({},e)):Object(b.jsx)(o.a,{to:"/login"})}})),Object(b.jsx)(_,{})]})},P=function(){return Object(b.jsx)("div",{className:"w-full rounded px-2 py-3",children:Object(b.jsxs)("div",{className:"flex gap-2 animate-pulse items-center justify-center",children:[Object(b.jsx)("div",{className:"h-14 w-14 bg-purple-400 rounded-full"}),Object(b.jsxs)("div",{className:" space-y-3 ",children:[Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-28"}),Object(b.jsx)("div",{className:"bg-purple-400 rounded h-3 w-20"})]})]})})},I=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"w-auto rounded space-y-3",children:Object(b.jsxs)("div",{className:"flex gap-2 animate-pulse items-center p-2",children:[Object(b.jsx)("div",{className:"h-14 w-14 bg-purple-400 rounded-full"}),Object(b.jsxs)("div",{className:"flex-auto space-y-3 ",children:[Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-3/4"}),Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-2/4"})]})]})}),Object(b.jsx)("div",{className:"w-auto rounded space-y-3",children:Object(b.jsxs)("div",{className:"flex gap-2 animate-pulse items-center p-2",children:[Object(b.jsx)("div",{className:"h-14 w-14 bg-purple-400 rounded-full"}),Object(b.jsxs)("div",{className:"flex-auto space-y-3 ",children:[Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-3/4"}),Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-2/4"})]})]})}),Object(b.jsx)("div",{className:"w-auto rounded space-y-3",children:Object(b.jsxs)("div",{className:"flex gap-2 animate-pulse items-center p-2",children:[Object(b.jsx)("div",{className:"h-14 w-14 bg-purple-400 rounded-full"}),Object(b.jsxs)("div",{className:"flex-auto space-y-3 ",children:[Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-3/4"}),Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-2/4"})]})]})}),Object(b.jsx)("div",{className:"w-auto rounded space-y-3",children:Object(b.jsxs)("div",{className:"flex gap-2 animate-pulse items-center p-2",children:[Object(b.jsx)("div",{className:"h-14 w-14 bg-purple-400 rounded-full"}),Object(b.jsxs)("div",{className:"flex-auto space-y-3 ",children:[Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-3/4"}),Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-2/4"})]})]})})]})},A=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.users}));return Object(b.jsx)("div",{className:"md:col-span-3 hidden md:block ",children:Object(b.jsx)("div",{className:"space-y-5",children:Object(b.jsxs)("div",{className:"border-t py-3 border-button2 border-opacity-30 rounded-xl w-full m-0 flex flex-col justify-center space-y-3 ",children:[Object(b.jsx)("p",{className:" text-md font-bold text-center",children:"Your Followers"}),0===(null===t||void 0===t?void 0:t.currentUserFollowers.length)&&(null===t||void 0===t?void 0:t.userFollowerLoading)?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(I,{})}):0===t.currentUserFollowers.length?Object(b.jsx)("p",{className:" text-md font-light text-center",children:"No followers yet."}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"max-h-96 overflow-y-auto w-full space-y-2",children:[null===t||void 0===t?void 0:t.currentUserFollowers.map((function(e){var t,a,c,s,n,r,o,i;return Object(b.jsx)("div",{className:"relative overflow-hidden h-16 w-full rounded-md shadow-md ",children:Object(b.jsxs)(l.b,{to:"/profile/".concat(null===(t=e.user)||void 0===t?void 0:t._id),children:[(null===(a=e.user)||void 0===a?void 0:a.coverPhoto)&&Object(b.jsx)("img",{src:null===(c=e.user)||void 0===c?void 0:c.coverPhoto,alt:"",className:"object-cover object-center w-full h-full opacity-30"}),Object(b.jsxs)("div",{className:"flex space-x-3 items-center absolute inset-0 overflow-hidden",children:[Object(b.jsx)("div",{className:"flex-shrink-0 ml-3",children:(null===(s=e.user)||void 0===s?void 0:s.imageUrl)?Object(b.jsx)("img",{src:null===(n=e.user)||void 0===n?void 0:n.imageUrl,alt:"User Profile",className:"rounded-full w-11 h-11 object-cover m-auto"}):Object(b.jsx)("img",{src:k,alt:"User Profile",className:"rounded-full w-11 h-11 object-cover m-auto"})}),Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsxs)("h1",{className:"text-sm font-medium leading-tight",children:[null===(r=e.user)||void 0===r?void 0:r.firstname," ",null===(o=e.user)||void 0===o?void 0:o.lastname," "]}),Object(b.jsx)("p",{className:"text-xs text-gray-300 mt-0 break-normal ",children:null===(i=e.user)||void 0===i?void 0:i.email})]})]})]})},null===e||void 0===e?void 0:e._id)})),(null===t||void 0===t?void 0:t.userFollowerLoading)?Object(b.jsx)("div",{className:"flex items-center justify-center w-full",children:Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-10 w-10"})}):Object(b.jsx)("button",{className:"py-2 underline text-center text-pink-100 font-medium m-auto w-full rounded-md",onClick:function(){e({type:"PAGE_FOLLOWERS"})},children:"See more followers."})]})})]})})})},F=function(){var e,t,a,c,s,n,r=Object(p.c)((function(e){return e.auth}));return Object(b.jsx)("div",{className:"hidden col-span-3 lg:col-span-3 xl:col-span-3 lg:block",children:Object(b.jsxs)("div",{className:"space-y-5 sticky top-0 ",children:[Object(b.jsx)(l.b,{to:"/",children:Object(b.jsxs)("div",{className:"text-2xl flex gap-2 justify-center items-center h-14 w-full font-light",children:[Object(b.jsx)("img",{src:E,alt:"",className:"h-8 w-8"}),Object(b.jsx)("span",{children:"CONNECT"})]})}),(null===r||void 0===r?void 0:r.loading)?Object(b.jsx)(P,{}):Object(b.jsx)("div",{className:"px-2 py-3 rounded-md ",children:Object(b.jsx)(l.b,{to:"/profile/".concat(null===(e=r.authData)||void 0===e?void 0:e._id),children:Object(b.jsxs)("div",{className:"flex justify-center space-x-3 ",children:[(null===(t=r.authData)||void 0===t?void 0:t.imageUrl)?Object(b.jsx)("img",{src:null===(a=r.authData)||void 0===a?void 0:a.imageUrl,alt:"",className:"h-12 w-12 rounded-full object-cover border-0 bg-purple-400 flex-shrink-0"}):Object(b.jsx)("img",{src:k,alt:"",className:"h-12 w-12 rounded-full object-cover border-0 bg-purple-400 flex-shrink-0"}),Object(b.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(b.jsxs)("h1",{className:"text-md font-semibold leading-tight",children:[null===(c=r.authData)||void 0===c?void 0:c.firstname," ",null===(s=r.authData)||void 0===s?void 0:s.lastname]}),Object(b.jsx)("p",{className:"text-xs text-gray-200",children:null===(n=r.authData)||void 0===n?void 0:n.email})]})]})})}),Object(b.jsx)(A,{})]})})},M=function(){var e=Object(p.b)(),t=Object(o.g)(),a=Object(p.c)((function(e){return e.users}));return Object(b.jsx)("div",{className:"xl:col-span-3 hidden xl:block ",children:Object(b.jsxs)("div",{className:"space-y-5 sticky top-0",children:[Object(b.jsx)("div",{className:"h-14 w-full rounded flex justify-start items-center",children:Object(b.jsxs)("button",{className:"transition ease-in duration-75 px-3 py-2 rounded-sm text-sm font-light flex gap-2 items-center justify-center",onClick:function(){e({type:"LOGOUT"}),t.push("/login")},children:[Object(b.jsx)("img",{src:R,alt:"",className:"h-6 w-6"}),Object(b.jsx)("span",{children:"Logout"})]})}),Object(b.jsxs)("div",{className:"border-t border-button2 border-opacity-30 py-3 rounded-xl w-full m-0 flex flex-col justify-center space-y-3 ",children:[Object(b.jsx)("p",{className:" text-md font-bold text-center",children:"Connect Users."}),0===(null===a||void 0===a?void 0:a.users.length)?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(I,{})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"max-h-96 overflow-y-auto w-full space-y-2",children:[null===a||void 0===a?void 0:a.users.map((function(e){return Object(b.jsx)("div",{className:"relative overflow-hidden h-16 w-full rounded-md shadow-md",children:Object(b.jsxs)(l.b,{to:"/profile/".concat(e._id),children:[(null===e||void 0===e?void 0:e.coverPhoto)&&Object(b.jsx)("img",{src:null===e||void 0===e?void 0:e.coverPhoto,alt:"",className:"object-cover object-center w-full h-full opacity-30"}),Object(b.jsxs)("div",{className:"flex items-center absolute inset-0 overflow-hidden space-x-3",children:[Object(b.jsx)("div",{className:"flex-shrink-0 ml-3",children:e.imageUrl?Object(b.jsx)("img",{src:e.imageUrl,alt:"",className:"rounded-full w-12 h-12 object-cover "}):Object(b.jsx)("img",{src:k,alt:"",className:"rounded-full w-12 h-12 object-cover "})}),Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsxs)("h1",{className:"text-sm font-medium leading-tight",children:[e.firstname," ",e.lastname," "]}),Object(b.jsx)("p",{className:"text-xs text-gray-300 mt-0 break-normal ",children:e.email})]})]})]})},null===e||void 0===e?void 0:e._id)})),(null===a||void 0===a?void 0:a.loading)?Object(b.jsx)("div",{className:"flex items-center justify-center w-full",children:Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-10 w-10"})}):Object(b.jsx)("button",{className:"text-center text-pink-100 font-medium underline m-auto w-full rounded-md",onClick:function(){e({type:"PAGE"})},children:"Load more users."})]})})]}),Object(b.jsx)("div",{className:"fixed m-4 z-40 text-sm text-gray-300 text-center bottom-2 right-0 underline",children:Object(b.jsx)("a",{href:"https://www.facebook.com/limnixon03292001/",target:"_blank",rel:"noreferrer",children:"Developed By: Nixon A. Lim"})})]})})};v.a.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token"))),e}));var G=function(e){return v.a.post("/post/create",e)},z=function(e){return v.a.delete("/post/delete/".concat(e))},q=function(e,t){return v.a.patch("/post/update/".concat(e),t)},W=function(e){return v.a.patch("/post/like/".concat(e))},B=function(e,t){return v.a.post("/post/comment/".concat(e),t)},H=function(e,t){return v.a.patch("/post/comment/".concat(e),t)},X=function(e,t){return v.a.delete("/post/".concat(e,"/comment/").concat(t))},V=a(16),J=a(25),K=a.n(J),Y=a.p+"static/media/ellipsis.9f7ab38d.svg",Q=a.p+"static/media/edit.cf7e5221.svg",Z=a.p+"static/media/cancel2.1cdfcc61.svg",$=function(e){var t=e.setSmallModal,a=e.post,s=e.editModal,n=Object(c.useState)({description:a.description}),r=Object(u.a)(n,2),l=r[0],o=r[1],i=Object(c.useState)(a.postImg),m=Object(u.a)(i,2),x=m[0],O=m[1],v=Object(p.b)(),g=Object(p.c)((function(e){return e.posts})),w=Object(c.useRef)(),N=function(){o({description:"",postImg:""}),t(!1)};return Object(b.jsx)("div",{className:"fixed inset-y-0 inset-x-0 z-50 w-full h-full ".concat(s?"flex":"hidden"," justify-center items-center bg-black bg-opacity-25 overflow-auto"),children:Object(b.jsxs)("div",{className:"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md",children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor",children:[Object(b.jsxs)("div",{className:"flex items-center justify-center gap-2 pl-2",children:[Object(b.jsx)("img",{src:Q,alt:"",className:" w-5 h-5"}),Object(b.jsx)("h1",{className:"text-xl font-light",children:"Edit post"})]}),Object(b.jsx)("div",{children:g.updateLoading?"":Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75",onClick:N,children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})})]}),Object(b.jsx)("div",{children:g.updateLoading?Object(b.jsxs)("div",{className:"flex flex-col justify-center items-center p-4",children:[Object(b.jsx)("img",{src:j,alt:"loading...",className:"w-16 h-16"}),Object(b.jsx)("p",{className:"text-md",children:"Updating... Meow!"})]}):Object(b.jsx)("div",{className:"relative h-auto overflow-auto",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target,c=new FormData(t);if(c.append("imgUrl",x),""===l.description.trim()&&""===x)return alert("Input some content!");v(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"UPDATEPOST_LOADING"}),c.next=4,q(e,t);case 4:n=c.sent,r=n.data,s({type:"UPDATED_POST",payload:r}),a(),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),s({type:"ERRORS",payload:c.t0});case 13:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()}(a._id,c,N))},ref:w,children:[Object(b.jsx)("textarea",{placeholder:"Create Post...",cols:"30",rows:"3",className:"w-full h-40 bg-primary p-3 focus:outline-none inset-0 m-0 rounded-t-md resize-none relative align-top overflow-auto",name:"description",defaultValue:l.description,onChange:function(e){return o(Object(d.a)(Object(d.a)({},l),{},{description:e.target.value}))}}),Object(b.jsxs)("div",{className:"space-y-3 bg-primary p-3 rounded-md",children:[x&&Object(b.jsxs)("div",{className:"relative h-52 overflow-auto",children:[Object(b.jsx)("img",{src:x,alt:x,className:"rounded-md object-cover w-full max-h-37 bg-"}),Object(b.jsxs)("div",{className:"bg-gray-600 bg-opacity-30 shadow-md hover:bg-gray-500 hover:bg-opacity-30  active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-2 cursor-pointer",onClick:function(){O(""),w.current.reset()},children:[" ",Object(b.jsx)("img",{src:Z,alt:"",className:"w-4 h-4 rounded-md "})," "]})]}),Object(b.jsxs)("div",{className:"flex flex-col items-center justify-end gap-3",children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center text-xs md:text-sm relative object-cover cursor-pointer overflow-hidden w-full",children:[Object(b.jsx)("p",{className:"text-md",children:"Upload Picture:"}),Object(b.jsx)("input",{type:"file",name:"image",onChange:function(e){if("image/jpg"!==e.target.files[0].type&&"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type)return w.current.reset(),O(""),alert("File type not supported!");O(URL.createObjectURL(e.target.files[0]))}})]}),Object(b.jsx)("button",{className:"bg-button2 hover:bg-purple-400 active:bg-purple-500 rounded-md p-1 py-2 p transition ease-in duration-75 cursor-pointer w-full text-sm md:text-lg font-light",children:" Update Post"})]})]})]})})})]})})},ee=a.p+"static/media/trash.64ce917e.svg",te=a.p+"static/media/down-arrow.8f5ef989.svg",ae=function(e){var t=e.setSmallModal,a=e.handleDelete,s=e.deleteLoading,n=e.post,r=e.smallRef,l=Object(c.useState)(!1),o=Object(u.a)(l,2),i=o[0],d=o[1];return Object(b.jsx)("div",{className:"absolute top-12  z-30 right-3 w-1/2 md:w-2/5 h-auto rounded-md border border-borderColor bg-primary shadow-md text-white ",ref:r,children:Object(b.jsxs)("div",{className:"relative pt-1",children:[Object(b.jsx)("div",{className:"absolute z-10  -top-4 right-3",children:Object(b.jsx)("img",{src:te,alt:"",className:"w-5 h-5 transform rotate-180 "})}),s?Object(b.jsxs)("div",{className:"flex gap-3 items-center px-3 pb-2",children:[Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-14 w-14"}),Object(b.jsx)("span",{children:"Please wait while deleting the post..."})]}):Object(b.jsxs)("ul",{className:"p-2",children:[Object(b.jsx)("li",{className:"hover:bg-white hover:bg-opacity-10 rounded-md py-2 px-3 transition duration-75 ",children:Object(b.jsxs)("button",{className:"flex items-center gap-2 w-full",onClick:function(){return d((function(e){return!e}))},children:[Object(b.jsx)("img",{src:Q,alt:"",className:" w-4 h-4 "}),"  ",Object(b.jsx)("span",{className:"text-md",children:"Edit post"})]})}),Object(b.jsx)("li",{className:"hover:bg-white hover:bg-opacity-10 rounded-md py-2 px-3 transition duration-75 m-0",children:Object(b.jsxs)("button",{className:"flex items-center gap-2 w-full",onClick:a,children:[Object(b.jsx)("img",{src:ee,alt:"",className:" w-4 h-4 text-white"}),Object(b.jsx)("span",{className:"text-md ",children:"Delete post"})]})})]}),Object(b.jsx)($,{seteditModal:d,setSmallModal:t,post:n,editModal:i})]})})},ce=a.p+"static/media/right-arrow.fef4c925.svg",se=a.p+"static/media/delete.064f1a98.svg",ne=function(e){var t=e.setEditModal,a=e.setModal,s=e.userComment,n=e.postID,r=Object(c.useState)({commentID:s._id,data:null===s||void 0===s?void 0:s.commentData}),l=Object(u.a)(r,2),o=l[0],i=l[1],m=Object(p.b)(),x=Object(p.c)((function(e){return e.posts.updateCommentLoading})),O=function(e){e.preventDefault(),m(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"UPDATE_COMMENT_LOADING"}),c.next=4,H(e,t);case 4:n=c.sent,r=n.data,s({type:"UPDATE_COMMENT",payload:r}),a(),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),s({type:"ERRORS",payload:c.t0});case 13:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()}(n,o,v))},v=function(){t(!1),a(!1)};return Object(b.jsx)("div",{className:"fixed inset-y-0 inset-x-0 z-50 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto",children:Object(b.jsxs)("div",{className:"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md",children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor",children:[Object(b.jsx)("div",{className:"flex gap-2 pl-2",children:Object(b.jsx)("h1",{className:"text-xl",children:"Edit Comment"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75",onClick:v,children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})})]}),x?Object(b.jsxs)("div",{className:"w-full h-full flex flex-col gap-2 items-center justify-center p-3",children:[Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-14 w-14 m-auto"}),Object(b.jsx)("p",{children:"Updating comment... Meow!"})]}):Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){return O(e)},children:[Object(b.jsx)("textarea",{placeholder:"Create Post...",cols:"30",rows:"3",className:"w-full h-52 bg-primary p-3 focus:outline-none inset-0 m-0 rounded-t-md resize-none relative align-top overflow-auto",name:"description",defaultValue:s.commentData,onChange:function(e){return i(Object(d.a)(Object(d.a)({},o),{},{data:e.target.value}))},required:!0}),Object(b.jsx)("div",{className:"p-2",children:Object(b.jsx)("button",{className:"bg-button2 hover:bg-purple-400 active:bg-purple-500 rounded-md p-1 py-2 p transition ease-in duration-75 cursor-pointer w-full text-sm md:text-lg",onClick:O,children:" Update Comment"})})]})})]})})},re=function(e){var t=e.setModal,a=e.userComment,s=e.postID,n=Object(c.useState)(!1),r=Object(u.a)(n,2),l=r[0],o=r[1],i=Object(p.c)((function(e){return e.posts.deleteCommentLoading})),d=Object(p.b)();return Object(b.jsxs)("div",{className:"flex items-center justify-center gap-1 absolute top-7 right-0 bg-secondary border border-borderColor shadow rounded-full w-max overflow-hidden p-1 z-20",children:[i?Object(b.jsxs)("div",{className:"flex items-center justify-center px-1 gap-2 text-sm",children:[Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-8 w-8 m-auto"}),Object(b.jsx)("p",{children:"Removing comment..."})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"h-8 w-8 p-2 cursor-pointer hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 rounded-full",onClick:function(){return o((function(e){return!e}))},children:Object(b.jsx)("img",{src:Q,alt:"Edit",className:"w-full h-full"})}),Object(b.jsx)("div",{className:"h-8 w-8 p-2 cursor-pointer hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 rounded-full",onClick:function(){d(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"DELETE_COMMENT_LOADING"}),c.next=4,X(e,t);case 4:n=c.sent,r=n.data,s({type:"DELETE_COMMENT",payload:{postID:e,commentID:t}}),console.log(r.msg),a(!1),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),s({type:"ERRORS",payload:c.t0});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e){return c.apply(this,arguments)}}()}(s,a._id,t))},children:Object(b.jsx)("img",{src:se,alt:"Delete",className:"w-full h-full"})}),Object(b.jsx)("div",{className:"h-7 w-7 p-2 cursor-pointer hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 rounded-full",children:Object(b.jsx)("img",{src:Z,alt:"X",className:"w-full h-full",onClick:function(){return t((function(e){return!e}))}})})]}),l&&Object(b.jsx)(ne,{setEditModal:o,setModal:t,userComment:a,postID:s})]})},le=function(e){var t,a,s,n,r,o=e.userComment,i=e.postID,d=Object(c.useState)(!1),j=Object(u.a)(d,2),m=j[0],x=j[1],f=Object(p.c)((function(e){return e.auth}));return Object(c.useEffect)((function(){return function(){return o}}),[o]),Object(b.jsxs)("div",{className:"flex gap-2 text-white w-full",children:[Object(b.jsx)("div",{className:"flex-shrink-0 w-11 min-w-max",children:(null===(t=o.user)||void 0===t?void 0:t.imageUrl)?Object(b.jsx)("img",{src:null===(a=o.user)||void 0===a?void 0:a.imageUrl,alt:"",className:"h-11 w-11 rounded-full object-cover bg-purple-400"}):Object(b.jsx)("img",{src:k,alt:"",className:"h-11 w-11 rounded-full object-cover bg-purple-400"})}),Object(b.jsxs)("div",{className:"relative flex-initial w-max h-auto bg-secondary bg-opacity-30 shadow rounded-lg p-3",children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center ",children:[Object(b.jsxs)(l.b,{to:"/profile/".concat(o.user._id),className:"text-md font-semibold",children:[null===(s=o.user)||void 0===s?void 0:s.firstname," ",null===(n=o.user)||void 0===n?void 0:n.lastname]}),Object(b.jsxs)("span",{className:"text-xs text-gray-200",children:[" - ",K()(o.commentDate).fromNow()]}),(null===(r=f.authData)||void 0===r?void 0:r._id)===o.user._id&&Object(b.jsx)("div",{className:"absolute -top-2 -right-3",children:Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsx)("button",{className:"hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 bg-secondary bg-opacity-30 shadow rounded-full p-1",onClick:function(){return x((function(e){return!e}))},children:Object(b.jsx)("img",{src:Y,alt:"...",className:"h-4 w-4 m-auto"})}),m&&Object(b.jsx)(re,{setModal:x,userComment:o,postID:i})]})})]}),Object(b.jsx)("div",{className:"text-sm font-normal",children:Object(b.jsx)("p",{className:"break-words",children:null===o||void 0===o?void 0:o.commentData})})]})]})},oe={data:""},ie=function(e){var t=e.setModalX,a=e.postID,s=e.refx,n=Object(p.c)((function(e){return e.posts.posts.find((function(e){return e._id===a}))})),r=Object(p.c)((function(e){return e.posts.createCommentLoading})),l=Object(p.c)((function(e){return e.posts})),o=Object(c.useState)(oe),i=Object(u.a)(o,2),d=i[0],m=i[1],x=Object(p.b)();Object(c.useEffect)((function(){console.log("Nagfefetch yung comment!");var e,t=v.a.CancelToken;return x({type:"COMMENT_LOADING"}),v.a.get("/post/comment/".concat(a),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;x({type:"COMMENT",payload:t})})).catch((function(e){v.a.isCancel(e)&&console.log("Request Canceled, fetching comments"),x({type:"ERRORS",payload:e})})),function(){return e()}}),[x,a]);var O=function(e){if(e.preventDefault(),""===d.data.trim())return alert("Input some content!");x(function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(c){var s,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:"CREATE_COMMENT_LOADING"}),a.next=4,B(e,t);case 4:s=a.sent,n=s.data,c({type:"NEW_COMMENT",payload:n}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),c({type:"ERRORS",payload:a.t0});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,d)),m({data:""})};return Object(b.jsx)("div",{className:"fixed inset-y-0 inset-x-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto",id:"modal",children:Object(b.jsxs)("div",{className:"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md",id:"inner",ref:s,children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor",children:[Object(b.jsx)("div",{className:"flex gap-2 pl-2",children:Object(b.jsx)("h1",{className:"text-xl",children:"Comments"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75",onClick:function(){return t((function(e){return!e}))},children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})})]}),Object(b.jsx)("div",{className:"overflow-auto h-72 p-3",children:l.commentLoading?Object(b.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:Object(b.jsxs)("div",{className:"space-y-3",children:[Object(b.jsx)("img",{src:j,alt:"",className:"h-14 w-14 m-auto "}),Object(b.jsx)("p",{children:"Collecting comments..."})]})}):0===(null===n||void 0===n?void 0:n.comment.length)?Object(b.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:Object(b.jsx)("div",{className:"space-y-3",children:Object(b.jsx)("p",{children:"No Comments found"})})}):Object(b.jsx)("div",{className:"space-y-4",children:n.comment.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(le,{userComment:e,postID:a})},e._id)}))})}),Object(b.jsx)("div",{className:"p-2 w-full",children:Object(b.jsx)("form",{onSubmit:function(e){return O(e)},children:Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsx)("input",{type:"text",className:"bg-secondary p-2 px-3 pr-10 h-auto w-full rounded-full outline-none resize-none breaks-words",placeholder:"Write something...",name:"commentData",value:d.data,onChange:function(e){return function(e){m({data:e.target.value})}(e)}}),r?Object(b.jsx)("div",{className:"flex justify-center items-center rounded-full absolute right-2 top-0 bottom-0",children:Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-6 w-6"})}):Object(b.jsx)("button",{className:"flex justify-center items-center rounded-full absolute right-2 top-0 bottom-0",children:Object(b.jsx)("img",{src:ce,alt:"->",className:"h-6 w-6"})})]})})})]})})},de=function(e){var t=Object(c.useRef)(null),a=Object(c.useState)(e),s=Object(u.a)(a,2),n=s[0],r=s[1],l=function(e){var a;t.current&&!(null===(a=t.current)||void 0===a?void 0:a.contains(e.target))&&r(!1)},o=function(e){"Escape"===e.key&&r(!1)};return Object(c.useEffect)((function(){return document.addEventListener("click",l,!0),document.addEventListener("keydown",o,!0),function(){document.removeEventListener("click",l,!0),document.addEventListener("keydown",o,!0)}}),[t]),{smallRef:t,smallModal:n,setSmallModal:r}},ue=function(e){var t,a,s,n,r,o,i,d=e.post,j=Object(p.b)(),m=Object(p.c)((function(e){return e.posts})),x=Object(p.c)((function(e){return e.auth})),O=Object(c.useState)(d.likes),v=Object(u.a)(O,2),g=v[0],w=v[1],N=null===g||void 0===g?void 0:g.some((function(e){var t;return e===(null===(t=x.authData)||void 0===t?void 0:t._id)})),y=function(){return(null===g||void 0===g?void 0:g.length)>0?Object(b.jsxs)("span",{className:"text-md text-white",children:[null===g||void 0===g?void 0:g.length," ",(null===g||void 0===g?void 0:g.length)>1?"Likes":"Like"]}):Object(b.jsx)("span",{})},E=function(){var e,t,a;return(null===d||void 0===d||null===(e=d.comment)||void 0===e?void 0:e.length)>0?Object(b.jsxs)("span",{children:[null===d||void 0===d||null===(t=d.comment)||void 0===t?void 0:t.length," ",(null===d||void 0===d||null===(a=d.comment)||void 0===a?void 0:a.length)>1?"Comments":"Comment"]}):Object(b.jsx)("span",{children:"Comment"})},L=function(e){var t=Object(c.useRef)(null),a=Object(c.useState)(e),s=Object(u.a)(a,2),n=s[0],r=s[1],l=function(e){var a;t.current&&!(null===(a=t.current)||void 0===a?void 0:a.contains(e.target))&&r(!1)},o=function(e){"Escape"===e.key&&r(!1)};return Object(c.useEffect)((function(){return document.addEventListener("click",l,!0),document.addEventListener("keydown",o,!0),function(){document.removeEventListener("click",l,!0),document.addEventListener("keydown",o,!0)}}),[t]),{ref:t,modalX:n,setModalX:r}}(!1),S=L.ref,C=L.modalX,R=L.setModalX,_=de(!1),D=_.smallRef,U=_.smallModal,T=_.setSmallModal;return Object(b.jsxs)("div",{className:"bg-primary rounded-md space-y-3 relative -z-10 overflow-hidden",children:[Object(b.jsxs)("div",{className:"flex gap-3 p-3",children:[(null===(t=d.users)||void 0===t?void 0:t.imageUrl)?Object(b.jsx)("img",{src:null===(a=d.users)||void 0===a?void 0:a.imageUrl,alt:"",className:"w-11 h-11 md:w-12 md:h-12  rounded-full object-cover mx-0 "}):Object(b.jsx)("img",{src:k,alt:"",className:"w-11 h-11 md:w-12 md:h-12  rounded-full object-cover mx-0 "}),Object(b.jsxs)("div",{className:"leading-none mr-auto self-center space-y-4",children:[Object(b.jsxs)(l.b,{to:"/profile/".concat(null===(s=d.users)||void 0===s?void 0:s._id),className:"text-md font-semibold block",children:[null===(n=d.users)||void 0===n?void 0:n.firstname," ",null===(r=d.users)||void 0===r?void 0:r.lastname]}),Object(b.jsx)("span",{className:"text-xs text-gray-300",children:K()(null===d||void 0===d?void 0:d.postDate).fromNow()})]}),(null===(o=d.users)||void 0===o?void 0:o._id)===(null===(i=x.authData)||void 0===i?void 0:i._id)&&Object(b.jsxs)("div",{className:"self-end ",children:[Object(b.jsx)("button",{className:"hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 rounded-full py-1 px-1 absolute top-3 right-5 ",onClick:function(){T((function(e){return!e}))},children:Object(b.jsx)("img",{src:Y,alt:"",className:" w-5 h-5  rounded-full"})}),U&&Object(b.jsx)(ae,{setSmallModal:T,handleDelete:function(){var e;j((e=d._id,function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"DELETE_LOADING"}),t.next=4,z(e);case 4:a({type:"DELETE_POST",payload:e}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),a({type:"ERRORS",payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))},deleteLoading:m.deleteLoading,post:d,smallRef:D})]})]}),Object(b.jsx)("div",{className:"font-normal px-5 ",children:Object(b.jsx)("pre",{className:" text-sm md:text-md font-sans break-words whitespace-pre-wrap",children:null===d||void 0===d?void 0:d.description})}),""===(null===d||void 0===d?void 0:d.postImg)?"":Object(b.jsx)("img",{src:null===d||void 0===d?void 0:d.postImg,alt:null===d||void 0===d?void 0:d.postImg,className:"w-full object-cover rounded-md"}),Object(b.jsxs)("div",{className:"p-3 font-light flex justify-between",children:[Object(b.jsx)("div",{children:Object(b.jsxs)("button",{className:"flex gap-2 items-center font-light",onClick:function(){var e;j((e=d._id,function(){var t=Object(h.a)(f.a.mark((function t(a){var c,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W(e);case 3:c=t.sent,s=c.data,a({type:"LIKE_POST",payload:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"ERRORS",payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())),w(N?d.likes.filter((function(e){return e!==x.authData._id})):[].concat(Object(V.a)(d.likes),[x.authData._id]))},children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:N?"white":"none",viewBox:"0 0 24 24",stroke:N?"gray":"white",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),Object(b.jsx)(y,{})]})}),Object(b.jsx)("button",{className:"font-light",onClick:function(){return R((function(e){return!e}))},children:Object(b.jsx)(E,{})}),C&&Object(b.jsxs)("div",{children:[Object(b.jsx)(ie,{setModalX:R,postID:d._id,refx:S})," "]})]})]})},je=function(e){var t=e.setModalOpen,a=e.postData,s=e.setpostData,n=e.handleSubmit,r=e.post,l=e.handleBlob,o=e.setBlob,i=e.blob,u=e.formx;document.addEventListener("click",(function(e){"modal"===e.target.id&&t(!1)})),Object(c.useEffect)((function(){return function(){o(""),s(Object(d.a)(Object(d.a)({},a),{},{description:""}))}}),[o,s]);return Object(b.jsx)("div",{className:"fixed inset-0 z-50 w-full h-full bg-black bg-opacity-25 flex justify-center items-center",id:"modal",children:Object(b.jsxs)("div",{className:"bg-primary w-full md:w-2/4 max-w-screen-md m-3 h-auto shadow-md border border-borderColor rounded-md",children:[Object(b.jsxs)("div",{className:"p-2 flex justify-between items-center border-b border-borderColor tracking-wide font-light",children:[Object(b.jsx)("div",{className:"p-2 text-lg",children:"Create Post"}),!r.newPostLoading&&Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75",onClick:function(){return t((function(e){return!e}))},children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})]}),r.newPostLoading?Object(b.jsxs)("div",{className:"text-md text-white flex flex-col justify-center items-center gap-1 p-5",children:[Object(b.jsx)("img",{src:j,alt:j,className:"w-14 h-14"})," ",Object(b.jsx)("span",{children:"Posting..."})]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{onSubmit:n,ref:u,children:[Object(b.jsx)("textarea",{placeholder:"Create Post...",cols:"30",rows:"3",className:"w-full h-32 bg-primary p-3 focus:outline-none inset-0 m-0 rounded-t-md resize-none relative align-top overflow-auto",name:"description",value:a.description,onChange:function(e){return s(Object(d.a)(Object(d.a)({},a),{},{description:e.target.value}))}}),Object(b.jsxs)("div",{className:"space-y-3 bg-primary p-3 rounded-b-md",children:[i&&Object(b.jsxs)("div",{className:"relative h-52 overflow-auto",children:[Object(b.jsx)("img",{src:i,alt:i,className:"rounded-md object-cover object-center h-full w-full max-h-full"}),Object(b.jsxs)("div",{className:"bg-gray-600 bg-opacity-30 hover:bg-gray-500 hover:bg-opacity-30 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-2 cursor-pointer",children:["  ",Object(b.jsx)("img",{src:Z,alt:"",className:"w-4 h-4 rounded-md ",onClick:function(){o(""),u.current.reset()}})," "]})]}),Object(b.jsxs)("div",{className:"flex items-center gap-3",children:[Object(b.jsx)("p",{className:"text-xs md:text-sm ",children:"Upload Picture:"}),Object(b.jsx)("div",{className:"text-xs md:text-sm relative overflow-hidden",children:Object(b.jsx)("input",{type:"file",name:"image",onChange:l})})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"bg-button2 active:bg-white active:bg-opacity-25 rounded-md py-1 px-2 transition ease-in duration-75 text-sm md:text-lg w-full",children:"Post"})})]})]})})]})})},be=function(e){var t,a,c=e.handleSubmit,s=e.postData,n=e.setpostData,r=e.post,l=e.modalOpen,o=e.setModalOpen,i=e.handleBlob,d=e.setBlob,u=e.blob,j=e.formx,m=Object(p.c)((function(e){return e.auth}));return Object(b.jsxs)("div",{className:"relative h-20 bg-primary flex justify-start items-center rounded-md p-2 px-1 md:px-3 gap-1 overflow-hidden",children:[Object(b.jsx)("div",{className:"w-20",children:m.loading?Object(b.jsx)("div",{className:"w-14 h-14 object-cover rounded-full m-auto bg-purple-400 animate-pulse"}):(null===(t=m.authData)||void 0===t?void 0:t.imageUrl)?Object(b.jsx)("img",{src:null===(a=m.authData)||void 0===a?void 0:a.imageUrl,alt:"",className:"w-11 h-11 md:w-12 md:h-12 object-cover rounded-full m-auto bg-purple-400"}):Object(b.jsx)("img",{src:k,alt:"",className:"w-11 h-11 md:w-12 md:h-12 object-cover rounded-full m-auto bg-purple-400"})}),Object(b.jsxs)("button",{className:"w-full h-11 text-gray-400 flex items-center justify-start bg-secondary mr-1 p-3 focus:outline-none m-0 rounded-full px-4 cursor-pointer hover:bg-gray-100 hover:bg-opacity-10 transition ease-in duration-75",name:"description",onClick:function(){return o((function(e){return!e}))},children:[" ",Object(b.jsx)("span",{className:"text-md",children:"Share something!"})," "]}),l&&Object(b.jsx)(je,{setModalOpen:o,postData:s,setpostData:n,handleSubmit:c,post:r,handleBlob:i,setBlob:d,blob:u,formx:j})]})},me=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"bg-primary shadow rounded-md p-4 w-full mx-auto",children:Object(b.jsxs)("div",{className:"animate-pulse flex flex-col space-y-5",children:[Object(b.jsxs)("div",{className:"flex  space-x-4 items-center",children:[Object(b.jsx)("div",{className:"rounded-full bg-purple-400 bg-opacity-80 h-14 w-14"}),Object(b.jsxs)("div",{className:"flex-1 space-y-3 py-1",children:[Object(b.jsx)("div",{className:"h-4 bg-purple-400 rounded w-28"}),Object(b.jsx)("div",{className:"h-3 bg-purple-400 rounded w-20"})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"h-4 bg-purple-400 rounded w-full"})}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"h-48 bg-purple-400 rounded w-full"})})]})}),Object(b.jsx)("div",{className:"bg-primary shadow rounded-md p-4 w-full mx-auto",children:Object(b.jsxs)("div",{className:"animate-pulse flex flex-col space-y-5",children:[Object(b.jsxs)("div",{className:"flex  space-x-4 items-center",children:[Object(b.jsx)("div",{className:"rounded-full bg-purple-400 bg-opacity-80 h-14 w-14"}),Object(b.jsxs)("div",{className:"flex-1 space-y-3 py-1",children:[Object(b.jsx)("div",{className:"h-4 bg-purple-400 rounded w-28"}),Object(b.jsx)("div",{className:"h-3 bg-purple-400 rounded w-20"})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"h-4 bg-purple-400 rounded w-full"})}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"h-48 bg-purple-400 rounded w-full"})})]})})]})},pe=a(40),xe=a.p+"static/media/loupe.911cbcae.svg",fe=function(){var e=Object(p.c)((function(e){return e.users})),t=Object(c.useState)(""),a=Object(u.a)(t,2),s=a[0],n=a[1],r=Object(o.g)(),i=Object(p.b)(),d=de(!1),m=d.smallRef,x=d.smallModal,f=d.setSmallModal;return Object(c.useEffect)((function(){i({type:"CLEAR_SEARCH_USER"})}),[s,i]),Object(c.useEffect)((function(){if(""!==s.trim()){var e,t=v.a.CancelToken;return f(!0),i({type:"SEARCH_LOADING"}),v.a.get("/users/search?q=".concat(s),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;i({type:"SEARCH_USER",payload:t})})).catch((function(e){var t;v.a.isCancel(e)?console.log("Request Canceled sa search"):(i({type:"ERRORS",payload:e}),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(i({type:"LOGOUT"}),r.push("/login")))})),function(){return e()}}}),[s,i,r,f]),Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsxs)("form",{className:"relative",children:[Object(b.jsx)(pe.DebounceInput,{minLength:2,debounceTimeout:300,value:s,onChange:function(e){return n(e.target.value)},placeholder:"Search user...",className:"md:h-14 p-3 w-full bg-primary rounded pl-11 outline-none focus:border-blue-500"}),Object(b.jsx)(l.b,{to:"/search?user=".concat(s),children:Object(b.jsx)("button",{className:"absolute left-0 top-0 bottom-0 flex items-center p-3",children:Object(b.jsx)("img",{src:xe,alt:"search",className:"w-6 h-5"})})})]}),x&&Object(b.jsx)("div",{className:"bg-primary max-h-64 overflow-y-auto overflow-x-hidden absolute mt-1 shadow-md z-30 w-full rounded-md space-y-1",ref:m,children:e.searchLoading?Object(b.jsxs)("div",{className:"flex items-center space-x-3 p-3",children:[Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-10 w-10 object-cover"}),Object(b.jsxs)("p",{children:["Looking for ",s]})]}):e.searchUser.map((function(e){return Object(b.jsx)("div",{className:"w-full h-20 z-10 relative overflow-hidden shadow",children:Object(b.jsxs)(l.b,{to:"/profile/".concat(e._id),children:[(null===e||void 0===e?void 0:e.coverPhoto)&&Object(b.jsx)("img",{src:e.coverPhoto,alt:"",className:"object-cover object-center w-full h-full opacity-40"}),Object(b.jsxs)("div",{className:"flex gap-4 items-center space-y-3  absolute inset-0 overflow-hidden",children:[Object(b.jsx)("div",{className:"w-20 h-full rounded-tl-md rounded-bl-md",children:(null===e||void 0===e?void 0:e.imageUrl)?Object(b.jsx)("img",{src:null===e||void 0===e?void 0:e.imageUrl,alt:"",className:"w-full h-full object-cover object-center"}):Object(b.jsx)("img",{src:k,alt:"",className:"w-full h-full object-cover object-center"})}),Object(b.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(b.jsxs)("h1",{className:"text-sm font-semibold text-white",children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]}),Object(b.jsx)("p",{className:"text-xs text-gray-200",children:null===e||void 0===e?void 0:e.email})]})]})]})},e._id)}))})]})},he=function(){return Object(b.jsx)("div",{className:"w-full rounded px-2 py-3",children:Object(b.jsxs)("div",{className:"flex gap-2 animate-pulse items-center justify-center",children:[Object(b.jsx)("div",{className:"h-14 w-14 bg-purple-400 rounded-md"}),Object(b.jsxs)("div",{className:" space-y-3 ",children:[Object(b.jsx)("div",{className:"bg-purple-400 rounded h-4 w-28"}),Object(b.jsx)("div",{className:"bg-purple-400 rounded h-3 w-20"})]})]})})},Oe={description:"",postImg:""},ve=function(){var e,t,a,s,n,r,i=Object(c.useState)(!1),d=Object(u.a)(i,2),j=d[0],m=d[1],x=Object(c.useState)(Oe),O=Object(u.a)(x,2),g=O[0],w=O[1],N=Object(c.useState)(1),y=Object(u.a)(N,2),E=y[0],L=y[1],S=Object(c.useState)(!1),C=Object(u.a)(S,2),R=C[0],_=C[1],D=Object(p.c)((function(e){return e.auth})),U=Object(c.useState)(""),T=Object(u.a)(U,2),P=T[0],I=T[1],A=Object(p.c)((function(e){return e.posts})),F=Object(o.g)(),M=Object(p.b)(),z=Object(c.useRef)();Object(c.useEffect)((function(){M({type:"RESET_POSTS"})}),[M]),Object(c.useEffect)((function(){var e,t=v.a.CancelToken;return M({type:"POSTS_LOADING"}),v.a.get("/post/post?page=".concat(E),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;_(t.result.length>0),M({type:"POSTS",payload:t})})).catch((function(e){var t;v.a.isCancel(e)?console.log("Request Canceled sa post!"):(M({type:"ERRORS",payload:e}),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(M({type:"LOGOUT"}),F.push("/login")))})),function(){return e()}}),[M,F,E]);var q=Object(c.useRef)(),W=Object(c.useCallback)((function(e){A.loading||(q.current&&q.current.disconnect(),q.current=new IntersectionObserver((function(e){e[0].isIntersecting&&R&&L((function(e){return e+1}))}),{rootMargin:"-150px"}),e&&q.current.observe(e))}),[A.loading,R]);return Object(b.jsxs)("div",{className:"lg:col-span-9 xl:col-span-6 col-span-full space-y-3 mb-16 md:mb-0",children:[Object(b.jsx)(fe,{}),Object(b.jsxs)("div",{className:"space-y-4 md:space-y-5",children:[Object(b.jsx)("div",{className:"p-2 md:hidden",children:(null===D||void 0===D?void 0:D.loading)?Object(b.jsx)(he,{}):Object(b.jsxs)(l.b,{to:"/profile/".concat(null===(e=D.authData)||void 0===e?void 0:e._id),className:"flex items-center justify-center gap-3",children:[(null===(t=D.authData)||void 0===t?void 0:t.imageUrl)?Object(b.jsx)("img",{src:null===(a=D.authData)||void 0===a?void 0:a.imageUrl,alt:"",className:"h-12 w-12 rounded-md object-cover bg-pruple-400"}):Object(b.jsx)("img",{src:k,alt:"",className:"h-12 w-12 rounded-md object-cover bg-pruple-400"}),Object(b.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(b.jsxs)("h1",{className:"text-md font-semibold",children:[null===(s=D.authData)||void 0===s?void 0:s.firstname," ",null===(n=D.authData)||void 0===n?void 0:n.lastname]}),Object(b.jsx)("p",{className:"text-xs text-gray-200",children:null===(r=D.authData)||void 0===r?void 0:r.email})]})]})}),Object(b.jsx)(be,{handleSubmit:function(e){e.preventDefault();var t=e.target,a=new FormData(t);""===g.description.trim()&&""===P?alert("Posting without a content is not allowed!"):M(function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(c){var s,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:"NEWPOST_LOADING"}),a.next=4,G(e);case 4:s=a.sent,n=s.data,c({type:"NEW_POST",payload:n}),t(!1),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("error sa created post",a.t0),c({type:"ERRORS",payload:a.t0});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(a,m)),w({description:"",postImg:""})},postData:g,setpostData:w,post:A,modalOpen:j,setModalOpen:m,handleBlob:function(e){if("image/jpg"!==e.target.files[0].type&&"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type)return z.current.reset(),I(null),alert("File type not supported!");I(URL.createObjectURL(e.target.files[0]))},setBlob:I,blob:P,formx:z}),0===(null===A||void 0===A?void 0:A.posts.length)?Object(b.jsx)(me,{}):Object(b.jsxs)("div",{className:"space-y-5",children:[A.posts.map((function(e,t){return(null===A||void 0===A?void 0:A.posts.length)===t+1?Object(b.jsx)("div",{ref:W,children:Object(b.jsx)(ue,{post:e})},e._id):0===e?null:Object(b.jsx)("div",{children:Object(b.jsx)(ue,{post:e})},e._id)})),!R&&Object(b.jsx)("p",{className:"text-center text-sm",children:"There are no more posts to show right now."}),A.loading&&Object(b.jsx)(me,{})]})]})]})},ge=function(){return Object(b.jsx)(ve,{})},we=function(e){var t=e.post;return Object(b.jsx)(ue,{post:t})};v.a.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token"))),e}));var Ne=function(e,t){return v.a.patch("/users/".concat(e),t)},ye=function(e,t){return v.a.patch("/users/coverPhoto/".concat(e),t)},Ee=function(e,t){return v.a.patch("/users/profilePicture/".concat(e),t)},Le=function(e){return v.a.patch("/users/follow/".concat(e))},Se=a.p+"static/media/follow.e7afc4f9.svg",Ce=a.p+"static/media/following.c324cd48.svg",Re=function(){return Object(b.jsxs)("div",{className:"w-full bg-primary animate-pulse rounded-md",children:[Object(b.jsx)("div",{className:"h-48 w-full bg-purple-400 rounded-t"}),Object(b.jsxs)("div",{className:"flex flex-col justify-center items-center gap-3 px-4 bg-primary rounded-b-md pt-2 p-6 z-10 sm:flex-row sm:justify-start",children:[Object(b.jsx)("div",{className:"-mt-20 ",children:Object(b.jsx)("div",{className:"bg-purple-400 border-4 border-borderColor w-28 h-28 rounded-full"})}),Object(b.jsxs)("div",{className:"space-y-3",children:[Object(b.jsx)("div",{className:"bg-purple-400 h-5 w-48 rounded"}),Object(b.jsx)("div",{className:"bg-purple-400 h-4 w-36 rounded m-auto sm:m-0"})]})]})]})},ke=function(e){var t,a,s=e.setModal,n=e.userInfo,r=Object(c.useState)({firstname:null===(t=n.user)||void 0===t?void 0:t.firstname,lastname:null===(a=n.user)||void 0===a?void 0:a.lastname}),l=Object(u.a)(r,2),o=l[0],i=l[1],m=Object(p.b)();return Object(b.jsx)("div",{className:"fixed inset-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto",children:Object(b.jsxs)("div",{className:"bg-primary m-2 w-full md:w-96 h-auto shadow-md border border-borderColor rounded-md",children:[Object(b.jsxs)("div",{className:"p-2 flex justify-between items-center border-b border-borderColor tracking-wide font-light",children:[Object(b.jsx)("div",{className:"p-1 text-lg",children:"Edit name"}),!n.userUpdateLoading&&Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75",onClick:function(){return s((function(e){return!e}))},children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})]}),n.userUpdateLoading?Object(b.jsxs)("div",{className:"p-4 w-full h-full flex flex-col items-center justify-center space-y-2",children:[Object(b.jsx)("img",{src:j,alt:"",className:"w-14 h-14"}),Object(b.jsx)("p",{children:"Updating...Meow!!"}),Object(b.jsx)("p",{className:"text-sm font-light text-gray-400",children:"Full page reload after.."})]}):Object(b.jsx)("div",{className:"p-3 space-y-2",children:Object(b.jsxs)("form",{onSubmit:function(e){var t;if(e.preventDefault(),""===o.firstname.trim()&&""===o.lastname.trim())return alert("Firstname, Lastname are required!");m(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"UPDATE_LOADING"}),c.next=4,Ne(e,t);case 4:n=c.sent,r=n.data,s({type:"UPDATE_USER",payload:r}),a(!1),window.location.reload(),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),s({type:"USERS_ERROR",payload:c.t0});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e){return c.apply(this,arguments)}}()}(null===(t=n.user)||void 0===t?void 0:t._id,o,s))},children:[Object(b.jsxs)("div",{className:"space-y-3 gap-2",children:[Object(b.jsxs)("div",{className:"space-y-1",children:[Object(b.jsx)("label",{children:"Firstname"}),Object(b.jsx)("input",{type:"text",placeholder:"Firstname",value:o.firstname,className:"w-full p-2 bg-secondary rounded-md outline-none",onChange:function(e){return i(Object(d.a)(Object(d.a)({},o),{},{firstname:e.target.value}))},name:"firstname"})]}),Object(b.jsxs)("div",{className:"space-y-1",children:[Object(b.jsx)("label",{children:"Lastname"}),Object(b.jsx)("input",{type:"text",placeholder:"Lastname",value:o.lastname,className:"w-full p-2 bg-secondary rounded-md outline-none",onChange:function(e){return i(Object(d.a)(Object(d.a)({},o),{},{lastname:e.target.value}))},name:"lastname"})]})]}),Object(b.jsx)("button",{className:"bg-button2 rounded-md mt-3 py-1 px-1 w-full text-center font-light text-md md:text-lg",children:"Save Changes"})]})})]})})},_e=function(e){var t,a=e.setModal,s=e.userInfo,n=Object(c.useState)(null===(t=s.user)||void 0===t?void 0:t.imageUrl),r=Object(u.a)(n,2),l=r[0],o=r[1],i=Object(p.b)(),d=Object(c.useRef)();return Object(b.jsx)("div",{className:"fixed inset-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto",children:Object(b.jsxs)("div",{className:"bg-primary m-2 w-full md:w-96 h-auto shadow-md border border-borderColor rounded-md",children:[Object(b.jsxs)("div",{className:"p-2 flex justify-between items-center border-b border-borderColor tracking-wide font-light",children:[Object(b.jsx)("div",{className:"p-1 text-md md:text-lg",children:"Change Profile Picture"}),!s.userUpdateLoading&&Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75",onClick:function(){return a((function(e){return!e}))},children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})]}),s.userUpdateLoading?Object(b.jsxs)("div",{className:"p-4 w-full h-full flex flex-col items-center justify-center space-y-2",children:[Object(b.jsx)("img",{src:j,alt:"",className:"w-14 h-14"}),Object(b.jsx)("p",{children:"Updating...Meow!!"}),Object(b.jsx)("p",{className:"text-sm font-light text-gray-400",children:"Full page reload after.."})]}):Object(b.jsxs)(b.Fragment,{children:[l&&Object(b.jsxs)("div",{className:"relative m-auto h-max w-max p-3",children:[Object(b.jsx)("img",{src:l,alt:"userProfileImg",className:"m-auto h-24 w-24 rounded-full bg-purple-400 object-cover object-center"}),Object(b.jsxs)("button",{className:"bg-gray-600 bg-opacity-40 shadow-md hover:bg-gray-500 hover:bg-opacity-30 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-2 right-2",children:[" ",Object(b.jsx)("img",{src:Z,alt:"",className:"w-4 h-4 rounded-md",onClick:function(){o(""),d.current.reset()}})," "]})]}),Object(b.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault();var c=e.target,n=new FormData(c);n.append("imgUrl",l),i(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r,l,o;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"UPDATE_LOADING"}),c.next=4,Ee(e,t);case 4:n=c.sent,r=n.data,s({type:"UPDATE_USER",payload:r}),a(!1),window.location.reload(),c.next=15;break;case 11:c.prev=11,c.t0=c.catch(0),o=null===(l=c.t0.response)||void 0===l?void 0:l.data.errors,s({type:"USERS_ERROR",payload:o});case 15:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e){return c.apply(this,arguments)}}()}(null===(t=s.user)||void 0===t?void 0:t._id,n,a))},ref:d,children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center self-start m-3",children:[Object(b.jsx)("p",{className:"text-xs md:text-sm break-words ",children:"Cover Photo:"}),Object(b.jsx)("div",{className:"text-xs md:text-sm relative overflow-hidden",children:Object(b.jsx)("input",{type:"file",name:"image",onChange:function(e){if("image/jpg"!==e.target.files[0].type&&"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type)return d.current.reset(),o(null),alert("File type not supported!");o(URL.createObjectURL(e.target.files[0]))}})})]}),Object(b.jsx)("button",{className:"bg-button2 rounded-b-md mt-2 py-1 px-1 w-full text-center font-light text-md md:text-lg",children:"Save Changes"})]})]})]})})},De=function(e){var t,a=e.setModal,s=e.userInfo,n=Object(c.useState)(null===(t=s.user)||void 0===t?void 0:t.coverPhoto),r=Object(u.a)(n,2),l=r[0],o=r[1],i=Object(p.b)(),d=Object(c.useRef)();return Object(b.jsx)("div",{className:"fixed inset-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto",children:Object(b.jsxs)("div",{className:"bg-primary m-2 w-full md:w-96 h-auto shadow-md border border-borderColor rounded-md",children:[Object(b.jsxs)("div",{className:"p-2 flex justify-between items-center border-b border-borderColor tracking-wide font-light",children:[Object(b.jsx)("div",{className:"p-1 text-md md:text-lg",children:"Change Cover Photo"}),!s.userUpdateLoading&&Object(b.jsx)("button",{className:"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75",onClick:function(){return a((function(e){return!e}))},children:Object(b.jsx)("img",{src:Z,alt:"",className:"h-4 w-4"})})]}),s.userUpdateLoading?Object(b.jsxs)("div",{className:"p-4 w-full h-full flex flex-col items-center justify-center space-y-2",children:[Object(b.jsx)("img",{src:j,alt:"",className:"w-14 h-14"}),Object(b.jsx)("p",{children:"Updating...Meow!!"}),Object(b.jsx)("p",{className:"text-sm font-light text-gray-400",children:"Full page reload after.."})]}):Object(b.jsxs)(b.Fragment,{children:[l&&Object(b.jsxs)("div",{className:"w-full h-52 md:h-64 p-3 overflow-auto relative",children:[Object(b.jsx)("img",{src:l,alt:"Cover",className:"rounded-md bg-purple-400 object-cover object-center h-full w-full"}),Object(b.jsxs)("button",{className:"bg-gray-600 bg-opacity-30 shadow-md hover:bg-gray-500 hover:bg-opacity-30  active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-3",children:["  ",Object(b.jsx)("img",{src:Z,alt:"",className:"w-4 h-4 rounded-md",onClick:function(){o(null),d.current.reset()}})," "]})]}),Object(b.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault();var c=e.target,n=new FormData(c);n.append("imgUrl",l),i(function(e,t,a){return function(){var c=Object(h.a)(f.a.mark((function c(s){var n,r;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:"UPDATE_LOADING"}),c.next=4,ye(e,t);case 4:n=c.sent,r=n.data,s({type:"UPDATE_USER",payload:r}),a(!1),window.location.reload(),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),s({type:"USERS_ERROR",payload:c.t0});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e){return c.apply(this,arguments)}}()}(null===(t=s.user)||void 0===t?void 0:t._id,n,a))},ref:d,children:[Object(b.jsxs)("div",{className:"flex gap-2 items-center self-start m-3",children:[Object(b.jsx)("p",{className:"text-xs md:text-sm break-words ",children:"Cover Photo:"}),Object(b.jsx)("div",{className:"text-xs md:text-sm relative overflow-hidden",children:Object(b.jsx)("input",{type:"file",name:"image",onChange:function(e){if("image/jpg"!==e.target.files[0].type&&"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type)return d.current.reset(),o(null),alert("File type not supported!");o(URL.createObjectURL(e.target.files[0]))}})})]}),Object(b.jsx)("button",{className:"bg-button2 rounded-b-md mt-2 py-1 px-1 w-full text-center font-light text-md md:text-lg",children:"Save Changes"})]})]})]})})},Ue=function(){var e,t,a,s,n,r,l,i,d,m,x,O,g,w=Object(p.b)(),N=Object(o.i)().id,y=Object(o.g)(),E=Object(c.useState)(!1),L=Object(u.a)(E,2),S=L[0],C=L[1],R=Object(c.useState)(!1),_=Object(u.a)(R,2),D=_[0],U=_[1],T=Object(c.useState)(!1),P=Object(u.a)(T,2),I=P[0],A=P[1],F=Object(c.useState)(1),M=Object(u.a)(F,2),G=M[0],z=M[1],q=Object(p.c)((function(e){return e.users})),W=Object(p.c)((function(e){return e.posts})),B=Object(p.c)((function(e){return e.auth.authData._id})),H=Object(o.h)(),X=Object(c.useRef)(),V=Object(c.useState)(!1),J=Object(u.a)(V,2),K=J[0],Y=J[1];Object(c.useEffect)((function(){z(1),w({type:"RESET_POSTS"});var e,t=v.a.CancelToken;return w({type:"USER_LOADING"}),v.a.get("/users/user/".concat(N),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;w({type:"USER",payload:t})})).catch((function(e){v.a.isCancel(e)&&console.log("Request Canceled! getting User Profile"),w({type:"USERS_ERROR",payload:e})})),function(){return e()}}),[H,w,N,y]),Object(c.useEffect)((function(){var e,t=v.a.CancelToken;return w({type:"POSTS_LOADING"}),v.a.get("/post/user?user=".concat(N,"&page=").concat(G),{cancelToken:new t((function(t){e=t}))}).then((function(e){var t=e.data;Y(t.result.length>0),w({type:"POSTS",payload:t})})).catch((function(e){var t;v.a.isCancel(e)?console.log("Request Canceled!"):(w({type:"ERRORS",payload:e}),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(w({type:"LOGOUT"}),y.push("/login")))})),function(){return e()}}),[w,y,G,H,N]);var Z=Object(c.useCallback)((function(e){W.loading||(X.current&&X.current.disconnect(),X.current=new IntersectionObserver((function(e){e[0].isIntersecting&&K&&z((function(e){return e+1}))}),{rootMargin:"-150px"}),e&&X.current.observe(e))}),[W.loading,K]),$=function(){var e;w(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var c,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_FOLLOWING_LOADING"}),t.next=4,Le(e);case 4:c=t.sent,s=c.data,a({type:"FOLLOW_USER",payload:s}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"USERS_ERROR",payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(null===(e=q.user)||void 0===e?void 0:e._id))},ee=null===(e=q.user)||void 0===e||null===(t=e.followers)||void 0===t?void 0:t.some((function(e){return e.user===B})),te=function(){return ee?Object(b.jsx)("button",{className:"bg-button2 hover:bg-opacity-100 active:bg-opacity-80 transition  ease-out duration-100 text-sm font-light px-6 py-1 rounded-full flex gap-2 items-center justify-center",onClick:$,children:q.userFollowingLoading?Object(b.jsx)("img",{src:j,alt:"",className:"h-5 w-5 m-auto"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"flex-shrink-0",children:Object(b.jsx)("img",{src:Ce,alt:"",className:"h-4 w-4 m-auto"})})," ",Object(b.jsx)("span",{children:"Following"})]})}):Object(b.jsx)("button",{className:"bg-button2 hover:bg-opacity-100 active:bg-opacity-80 transition  ease-out duration-100 text-sm font-light px-6 py-1 rounded-full flex gap-2 items-center justify-center",onClick:$,children:q.userFollowingLoading?Object(b.jsx)("img",{src:j,alt:"",className:"h-5 w-5 m-auto"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"flex-shrink-0",children:Object(b.jsx)("img",{src:Se,alt:"",className:"h-4 w-4 m-auto"})})," ",Object(b.jsx)("span",{children:"Follow"})]})})},ae=function(){var e,t,a;return(null===(e=q.user.followers)||void 0===e?void 0:e.length)>1?Object(b.jsxs)("span",{children:[" ",null===(t=q.user.followers)||void 0===t?void 0:t.length," followers "]}):Object(b.jsxs)("span",{children:[null===(a=q.user.followers)||void 0===a?void 0:a.length," follower"]})};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"lg:col-span-9 xl:col-span-6 col-span-full space-y-4 mb-16 md:mb-0",children:[Object(b.jsx)(fe,{}),q.userLoading?Object(b.jsx)(Re,{}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"w-full h-56 rounded-t-md overflow-y-contain relative",children:[Object(b.jsx)("div",{className:"bg-black bg-opacity-20 absolute inset-0"}),(null===(a=q.user)||void 0===a?void 0:a.coverPhoto)&&Object(b.jsx)("img",{src:null===(s=q.user)||void 0===s?void 0:s.coverPhoto,alt:"",className:"w-full h-full object-cover border-none"}),(null===(n=q.user)||void 0===n?void 0:n._id)===B&&Object(b.jsxs)("button",{className:"bg-button2 p-2 absolute rounded-full bottom-0 right-0 m-3 flex items-center justify-center gap-1 bg-opacity-50",onClick:function(){return U((function(e){return!e}))},children:[" ",Object(b.jsx)("img",{src:Q,alt:"edit",className:"h-4 w-4"}),Object(b.jsx)("p",{className:"text-xs hidden sm:block",children:"Edit Cover photo"})]})]}),Object(b.jsxs)("div",{className:"space-y-4",children:[Object(b.jsxs)("div",{className:"flex justify-center flex-col sm:flex-row sm:justify-between bg-primary rounded-b-md",children:[Object(b.jsxs)("div",{className:"flex flex-col justify-center items-center gap-3 px-4 pt-2 pb-1 md:pb-none sm:pb-5 z-10 sm:flex-row sm:justify-start",children:[Object(b.jsxs)("div",{className:"-mt-20 flex-shrink-0 relative ",children:[(null===(r=q.user)||void 0===r?void 0:r.imageUrl)?Object(b.jsx)("img",{src:null===(l=q.user)||void 0===l?void 0:l.imageUrl,alt:"",className:"rounded-full h-28 w-28 border-4 border-borderProfile object-cover relative bg-purple-400"}):Object(b.jsx)("img",{src:k,alt:"",className:"rounded-full h-28 w-28 border-4 border-borderProfile object-cover relative bg-purple-400"}),(null===(i=q.user)||void 0===i?void 0:i._id)===B&&Object(b.jsx)("button",{className:"flex items-center justify-center p-2 absolute bottom-0 right-2 bg-button2 rounded-full bg-opacity-50",onClick:function(){return A((function(e){return!e}))},children:Object(b.jsx)("img",{src:Q,alt:"",className:"h-4 w-4"})})]}),Object(b.jsxs)("div",{className:"text-center sm:text-left space-y-1",children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{className:"text-lg font-semibold",children:[null===(d=q.user)||void 0===d?void 0:d.firstname," ",null===(m=q.user)||void 0===m?void 0:m.lastname]}),Object(b.jsx)("p",{className:"text-sm text-gray-300",children:null===(x=q.user)||void 0===x?void 0:x.email})]}),Object(b.jsxs)("p",{className:"text-md text-gray-300 font-light",children:[" ",Object(b.jsx)(ae,{})," "]})]})]}),(null===(O=q.user)||void 0===O?void 0:O._id)===B?null:Object(b.jsx)("div",{className:"p-3 flex items-start justify-center",children:Object(b.jsx)(te,{})})]}),(null===(g=q.user)||void 0===g?void 0:g._id)===B&&Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("button",{className:"bg-primary border-borderColor border w-full flex gap-2 justify-center items-center p-3 rounded-md",onClick:function(){return C((function(e){return!e}))},children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:Q,alt:"edit",className:"h-4 w-4 m-auto"})}),Object(b.jsx)("p",{className:"font-light",children:"Change Name"})]})})]})]}),Object(b.jsx)("div",{className:"space-y-4",children:W.loading&&0===(null===W||void 0===W?void 0:W.posts.length)?Object(b.jsx)(me,{}):Object(b.jsxs)("div",{className:"space-y-5",children:[W.posts.map((function(e,t){return(null===W||void 0===W?void 0:W.posts.length)===t+1?Object(b.jsx)("div",{ref:Z,children:Object(b.jsx)(we,{post:e})},e._id):0===e?null:Object(b.jsx)("div",{children:Object(b.jsx)(we,{post:e})},e._id)})),!K&&(null===W||void 0===W?void 0:W.posts.length)>0?Object(b.jsx)("p",{className:"text-center font-light text-sm",children:"There are no more posts to show right now."}):0===(null===W||void 0===W?void 0:W.posts.length)?Object(b.jsx)("p",{className:"text-center font-light text-sm",children:"No post found.."}):null,W.loading&&Object(b.jsx)(me,{})]})})]}),S&&Object(b.jsx)(ke,{setModal:C,userInfo:q}),I&&Object(b.jsx)(_e,{setModal:A,userInfo:q}),D&&Object(b.jsx)(De,{setModal:U,userInfo:q})]})},Te=function(){return Object(b.jsx)(Ue,{})},Pe=function(){var e=Object(o.h)().search,t=new URLSearchParams(e).get("user"),a=Object(p.b)(),s=Object(o.g)(),n=Object(p.c)((function(e){return e.users}));return Object(c.useEffect)((function(){var e,c=v.a.CancelToken;return a({type:"SEARCH_LOADING"}),v.a.get("/users/search?q=".concat(t),{cancelToken:new c((function(t){e=t}))}).then((function(e){var t=e.data;a({type:"SEARCH_USER",payload:t})})).catch((function(e){var t;v.a.isCancel(e)?console.log("Request Canceled sa search2"):(a({type:"ERRORS",payload:e}),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(a({type:"LOGOUT"}),s.push("/login")))})),function(){return e()}}),[a,t,s]),Object(b.jsxs)("div",{className:"lg:col-span-9 xl:col-span-6 col-span-full space-y-5 mb-16 md:mb-0",children:[Object(b.jsx)(fe,{}),n.searchLoading?Object(b.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[Object(b.jsx)("img",{src:j,alt:"loading...",className:"h-18 w-18 object-cover"}),Object(b.jsxs)("p",{children:["Looking for ",t]})]}):Object(b.jsxs)("div",{className:"space-y-3",children:[Object(b.jsxs)("p",{className:"text-2xl text-gray-200 mb-2",children:["Search: ",t]}),0===n.searchUser.length?Object(b.jsx)("p",{children:"User doesn't exist."}):Object(b.jsx)("div",{className:"space-y-3",children:n.searchUser.map((function(e){return Object(b.jsx)("div",{className:"w-full h-20 z-10 relative overflow-hidden rounded-md shadow",children:Object(b.jsxs)(l.b,{to:"/profile/".concat(e._id),children:[(null===e||void 0===e?void 0:e.coverPhoto)&&Object(b.jsx)("img",{src:e.coverPhoto,alt:"",className:"object-cover object-center w-full h-full opacity-40"}),Object(b.jsxs)("div",{className:"flex gap-4 items-center space-y-3  absolute inset-0 overflow-hidden",children:[Object(b.jsx)("div",{className:"w-20 h-full rounded-tl-md rounded-bl-md",children:(null===e||void 0===e?void 0:e.imageUrl)?Object(b.jsx)("img",{src:null===e||void 0===e?void 0:e.imageUrl,alt:"",className:"w-full h-full object-cover object-center"}):Object(b.jsx)("img",{src:k,alt:"",className:"w-full h-full object-cover object-center"})}),Object(b.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(b.jsxs)("h1",{className:"text-sm font-semibold text-white",children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]}),Object(b.jsx)("p",{className:"text-xs text-gray-200",children:null===e||void 0===e?void 0:e.email})]})]})]})},e._id)}))})]})]})},Ie=function(){return Object(b.jsx)(Pe,{})},Ae=function(){return Object(b.jsxs)("div",{className:"grid grid-cols-12  md:gap-5 max-w-6xl m-auto w-full text-white p-2",children:[Object(b.jsx)(F,{}),Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",component:ge}),Object(b.jsx)(o.b,{exact:!0,path:"/profile/:id",component:Te}),Object(b.jsx)(o.b,{exact:!0,path:"/search",component:Ie})]}),Object(b.jsx)(M,{})]})},Fe=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(l.a,{children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/login",component:y}),Object(b.jsx)(T,{exact:!0,path:"/*",component:Ae}),Object(b.jsx)(o.b,{exact:!0,path:"*",component:L})]})})})},Me=a(18),Ge=a(41),ze={loading:!1,authData:{},error:null},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_USER":return Object(d.a)(Object(d.a)({},e),{},{authData:t.payload,loading:!1});case"LOGIN":return localStorage.setItem("token","".concat(t.payload.data.token)),Object(d.a)(Object(d.a)({},e),{},{loading:!1});case"LOGOUT":return localStorage.removeItem("token"),Object(d.a)(Object(d.a)({},e),{},{authData:{}});case"ERROR":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload});case"LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:null});case"LOADING_DONE":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:null});case"CLEAR_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:null});default:return e}},We={loading:!1,userUpdateLoading:!1,userLoading:!1,userFollowingLoading:!1,searchLoading:!1,userFollowerLoading:!1,users:[],currentUserFollowers:[],user:{followers:[]},searchUser:[],page:1,pageFollowers:1,error:null},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,users:[].concat(Object(V.a)(e.users),Object(V.a)(t.payload.result.map((function(e){return e})))),error:null});case"USERS_FOLLOWERS":return Object(d.a)(Object(d.a)({},e),{},{userFollowerLoading:!1,currentUserFollowers:[].concat(Object(V.a)(e.currentUserFollowers),Object(V.a)(t.payload.result.map((function(e){return e})))),error:null});case"CLEAR_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:[],currentUserFollowers:[]});case"USERS_LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:null});case"CLEAR_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:null});case"UPDATE_LOADING":return Object(d.a)(Object(d.a)({},e),{},{userUpdateLoading:!0});case"USER_LOADING":return Object(d.a)(Object(d.a)({},e),{},{userLoading:!0});case"USER":case"UPDATE_USER":return Object(d.a)(Object(d.a)({},e),{},{user:t.payload.result,userLoading:!1,userUpdateLoading:!1});case"FOLLOW_USER":return Object(d.a)(Object(d.a)({},e),{},{userFollowingLoading:!1,user:Object(d.a)(Object(d.a)({},e.user),{},{followers:t.payload.followUser.followers})});case"USER_FOLLOWING_LOADING":return Object(d.a)(Object(d.a)({},e),{},{userFollowingLoading:!0});case"USER_FOLLOWERS_LOADING":return Object(d.a)(Object(d.a)({},e),{},{userFollowerLoading:!0});case"SEARCH_LOADING":return Object(d.a)(Object(d.a)({},e),{},{searchLoading:!0});case"SEARCH_USER":return Object(d.a)(Object(d.a)({},e),{},{searchLoading:!1,searchUser:t.payload.result,error:null});case"CLEAR_SEARCH_USER":return Object(d.a)(Object(d.a)({},e),{},{searchLoading:!1,searchUser:[],error:null});case"PAGE":return Object(d.a)(Object(d.a)({},e),{},{page:e.page+1});case"PAGE_FOLLOWERS":return Object(d.a)(Object(d.a)({},e),{},{pageFollowers:e.pageFollowers+1});case"SETPAGE_DEFAULT":return Object(d.a)(Object(d.a)({},e),{},{page:1});case"SETPAGEFOLLOWERS_DEFAULT":return Object(d.a)(Object(d.a)({},e),{},{pageFollowers:1});case"USERS_ERROR":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,userUpdateLoading:!1,userLoading:!1,userFollowingLoading:!1,searchLoading:!1,userFollowerLoading:!1,error:t.payload});default:return e}},He={loading:!1,newPostLoading:!1,deleteLoading:!1,updateLoading:!1,commentLoading:!1,createCommentLoading:!1,updateCommentLoading:!1,deleteCommentLoading:!1,errors:null,posts:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POSTS":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errors:null,posts:[].concat(Object(V.a)(e.posts),Object(V.a)(t.payload.result.map((function(t){return e.posts.some((function(e){return e._id===t._id}))?0:t}))))});case"RESET_POSTS":return Object(d.a)(Object(d.a)({},e),{},{loading:!0,posts:[]});case"NEW_POST":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,newPostLoading:!1,errors:null,posts:[t.payload.result].concat(Object(V.a)(e.posts))});case"DELETE_POST":return Object(d.a)(Object(d.a)({},e),{},{deleteLoading:!1,posts:e.posts.filter((function(e){return e._id!==t.payload}))});case"UPDATED_POST":return Object(d.a)(Object(d.a)({},e),{},{updateLoading:!1,posts:e.posts.map((function(e){return e._id===t.payload.result._id?t.payload.result:e}))});case"COMMENT":return Object(d.a)(Object(d.a)({},e),{},{commentLoading:!1,posts:e.posts.map((function(e){return e._id===t.payload.result._id?Object(d.a)(Object(d.a)({},e),{},{comment:t.payload.result.comment}):e}))});case"UPDATE_COMMENT":case"NEW_COMMENT":return Object(d.a)(Object(d.a)({},e),{},{createCommentLoading:!1,updateCommentLoading:!1,posts:e.posts.map((function(e){return e._id===t.payload.result._id?Object(d.a)(Object(d.a)({},e),{},{comment:t.payload.result.comment}):e}))});case"DELETE_COMMENT":return Object(d.a)(Object(d.a)({},e),{},{deleteCommentLoading:!1,posts:e.posts.map((function(e){return e._id===t.payload.postID?Object(d.a)(Object(d.a)({},e),{},{comment:e.comment.filter((function(e){return e._id!==t.payload.commentID}))}):e}))});case"LIKE_POST":return Object(d.a)(Object(d.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload.updatedPost._id?Object(d.a)(Object(d.a)({},e),{},{likes:t.payload.updatedPost.likes}):e}))});case"POSTS_LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"NEWPOST_LOADING":return Object(d.a)(Object(d.a)({},e),{},{newPostLoading:!0});case"DELETE_LOADING":return Object(d.a)(Object(d.a)({},e),{},{deleteLoading:!0});case"UPDATEPOST_LOADING":return Object(d.a)(Object(d.a)({},e),{},{updateLoading:!0});case"COMMENT_LOADING":return Object(d.a)(Object(d.a)({},e),{},{commentLoading:!0});case"CREATE_COMMENT_LOADING":return Object(d.a)(Object(d.a)({},e),{},{createCommentLoading:!0});case"UPDATE_COMMENT_LOADING":return Object(d.a)(Object(d.a)({},e),{},{updateCommentLoading:!0});case"DELETE_COMMENT_LOADING":return Object(d.a)(Object(d.a)({},e),{},{deleteCommentLoading:!0});case"ERRORS":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,newPostLoading:!1,deleteLoading:!1,updateLoading:!1,commentLoading:!1,createCommentLoading:!1,updateCommentLoading:!1,deleteCommentLoading:!1,errors:t.payload});default:return e}},Ve=Object(Me.b)({auth:qe,users:Be,posts:Xe}),Je=Object(Me.d)(Ve,Object(Me.c)(Object(Me.a)(Ge.a)));r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(p.a,{store:Je,children:Object(b.jsx)(Fe,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.66a21737.chunk.js.map